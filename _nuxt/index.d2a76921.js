import{a as x,o as c,b as i,e as n,f as b,t as y,h as m,c as C,i as g,r as O,w as $,j as F,u as l,F as P,k as H,l as k,m as R,p as E}from"./entry.2f40c6a4.js";import{u as V}from"./asyncData.92e87b4b.js";const I={},Q={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},W=n("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"},null,-1),G=[W];function J(t,s){return c(),i("svg",Q,G)}const K=x(I,[["render",J]]);const X={},Y={class:"heart",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 471.701 471.701",style:{"enable-background":"new 0 0 471.701 471.701"},"xml:space":"preserve"},Z=n("g",null,[n("path",{d:`M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1
		c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3
		l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4
		C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3
		s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4
		c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3
		C444.801,187.101,434.001,213.101,414.401,232.701z`})],-1),ee=[Z];function te(t,s){return c(),i("svg",Y,ee)}const se=x(X,[["render",te]]);const ne={},oe={class:"heart",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 302.489 302.489",style:{"enable-background":"new 0 0 302.489 302.489"},"xml:space":"preserve"},ae=n("path",{d:`M302.351,98.012c-1.116-20.846-9.942-40.422-24.855-55.122c-15.103-14.887-34.811-23.086-55.491-23.086
	c-30.776,0-53.082,24.334-65.065,37.408c-1.85,2.019-4.018,4.384-5.527,5.827c-1.208-1.25-2.845-3.114-4.351-4.828
	c-10.944-12.466-33.72-38.406-66.571-38.406c-20.68,0-40.387,8.199-55.49,23.086C10.087,57.59,1.259,77.165,0.143,98.012
	c-1.111,20.812,4.212,38.921,17.26,58.72c10.324,15.669,37.545,46.266,66.195,74.408c14.757,14.495,28.339,26.779,39.277,35.524
	c17.762,14.2,24.565,16.021,28.506,16.021c3.695,0,10.683-1.657,28.615-15.981c10.913-8.717,24.448-20.982,39.143-35.468
	c28.393-27.99,55.515-58.628,65.956-74.507C293.877,143.372,303.774,124.629,302.351,98.012z`},null,-1),ce=[ae];function ie(t,s){return c(),i("svg",oe,ce)}const re=x(ne,[["render",ie]]),le={class:"card"},_e={class:"card__image"},ue=["src","alt"],de={class:"card__footer"},ve={class:"card__title"},pe={key:0,class:"card__types"},me=b({__name:"PokemonCard",props:{pokemon:null},emits:["favoriteHasClicked","unfavoriteHasClicked"],setup(t,{emit:s}){const{pokemon:r}=t,o=async e=>{e.preventDefault(),s("favoriteHasClicked",r.id)},u=async e=>{e.preventDefault(),s("unfavoriteHasClicked",r.id)};return(e,w)=>{const f=se,_=re;return c(),i("div",le,[n("div",_e,[n("img",{src:t.pokemon.image,alt:t.pokemon.name},null,8,ue)]),n("div",de,[n("div",null,[n("h2",ve,y(t.pokemon.name),1),t.pokemon.types?(c(),i("span",pe,y(t.pokemon.types.join(", ")),1)):m("",!0)]),t.pokemon.isFavorite?m("",!0):(c(),C(f,{key:0,onClick:o})),t.pokemon.isFavorite?(c(),C(_,{key:1,onClick:u})):m("",!0)])])}}});const h="https://q-exercise-api.o64ixruq9hj.us-south.codeengine.appdomain.cloud/api/rest",fe=async({limit:t,offset:s,search:r,isFavorite:o,type:u})=>{const e=new URL(`${h}/pokemon`);return t&&e.searchParams.append("limit",String(t)),s&&e.searchParams.append("offset",String(s)),r&&e.searchParams.append("search",r),u&&e.searchParams.append("type",u),o&&e.searchParams.append("isFavorite",String(o)),await $fetch(e.href)},he=async()=>await $fetch(`${h}/pokemon-types`),ke=async t=>await $fetch(`${h}/pokemon/${t}/favorite`,{method:"POST"}),ye=async t=>await $fetch(`${h}/pokemon/${t}/unfavorite`,{method:"POST"}),xe={class:"home-container"},we={class:"filters__favorites"},Ce={class:"type-favorites"},ge=["value"],$e={class:"select"},Fe=["value"],Pe=n("option",{value:""},"Type",-1),He=["value"],Ve={class:"filter__delete"},be={key:0,class:"list"},Be=b({__name:"index",async setup(t){let s,r;const o=g("pokemonsCache",()=>[]),u=g("$pqtWcjQkdb"),e=O({limit:20,offset:0,search:"",isFavorite:!1,type:""}),{pending:w,data:f,refresh:_}=([s,r]=$(async()=>V("pokemon-list",async()=>{var d;const a=await fe({...e.value,search:(d=e.value.search)==null?void 0:d.toLowerCase()});return u.value=a.count,o.value=[...o.value,...a.items],o.value})),s=await s,r(),s),{data:z}=([s,r]=$(async()=>V("pokemons-types",async()=>await he())),s=await s,r(),s),S=()=>{o.value=[],e.value.offset=0,e.value.isFavorite=!0,_()},B=()=>{o.value=[],e.value.offset=0,e.value.isFavorite=!1,_()},L=a=>{o.value=[],e.value.offset=0,e.value.search=a.target.value,_()},M=a=>{o.value=[],e.value.offset=0,e.value.type=a.target.value,_()},T=()=>{e.value.offset+=e.value.limit,_()},A=async a=>{await ke(a);const d=o.value.find(p=>p.id===a);d.isFavorite=!0},D=async a=>{await ye(a);const d=o.value.find(p=>p.id===a);d.isFavorite=!1},N=()=>{console.log("click"),o.value=[],e.value={limit:20,offset:0,search:"",isFavorite:!1,type:""},_()};return(a,d)=>{const p=K,j=me,q=E;return c(),i("div",xe,[n("div",we,[n("button",{class:F(["filter__all",{active:!l(e).isFavorite}]),onClick:B}," All ",2),n("button",{class:F(["filter__favorites",{active:l(e).isFavorite}]),onClick:S}," Favorites ",2)]),n("div",Ce,[n("input",{class:"filter__search",placeholder:"Search",type:"search",id:"name",name:"name",onInput:L,value:l(e).search},null,40,ge),n("div",$e,[n("select",{name:"types",id:"types",class:"filter__select",onChange:M,value:l(e).type},[Pe,(c(!0),i(P,null,H(l(z),(v,U)=>(c(),i("option",{value:v,key:U},y(v),9,He))),128))],40,Fe)]),n("div",Ve,[k(p,{onClick:N})])]),l(f)?(c(),i("ul",be,[(c(!0),i(P,null,H(l(f),v=>(c(),i("li",{key:v.id},[k(q,{to:`/pokemon/${v.id}`},{default:R(()=>[k(j,{pokemon:v,onFavoriteHasClicked:A,onUnfavoriteHasClicked:D},null,8,["pokemon"])]),_:2},1032,["to"])]))),128))])):m("",!0),l(o).length<=l(u)-1?(c(),i("button",{key:1,class:"button",onClick:T}," More pokemons ")):m("",!0)])}}});export{Be as default};
