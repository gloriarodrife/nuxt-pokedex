import{a as b,o as c,b as i,e as a,f as S,t as y,h as m,c as w,i as C,r as U,w as g,j as $,u as d,F as h,k as P,l as F,m as V,p as O}from"./entry.66eecb0d.js";import{u as H}from"./asyncData.4bca9b67.js";const R={},E={class:"heart",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 471.701 471.701",style:{"enable-background":"new 0 0 471.701 471.701"},"xml:space":"preserve"},Q=a("g",null,[a("path",{d:`M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1
		c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3
		l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4
		C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3
		s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4
		c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3
		C444.801,187.101,434.001,213.101,414.401,232.701z`})],-1),W=[Q];function G(t,s){return c(),i("svg",E,W)}const I=b(R,[["render",G]]);const J={},K={class:"heart",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 302.489 302.489",style:{"enable-background":"new 0 0 302.489 302.489"},"xml:space":"preserve"},X=a("path",{d:`M302.351,98.012c-1.116-20.846-9.942-40.422-24.855-55.122c-15.103-14.887-34.811-23.086-55.491-23.086
	c-30.776,0-53.082,24.334-65.065,37.408c-1.85,2.019-4.018,4.384-5.527,5.827c-1.208-1.25-2.845-3.114-4.351-4.828
	c-10.944-12.466-33.72-38.406-66.571-38.406c-20.68,0-40.387,8.199-55.49,23.086C10.087,57.59,1.259,77.165,0.143,98.012
	c-1.111,20.812,4.212,38.921,17.26,58.72c10.324,15.669,37.545,46.266,66.195,74.408c14.757,14.495,28.339,26.779,39.277,35.524
	c17.762,14.2,24.565,16.021,28.506,16.021c3.695,0,10.683-1.657,28.615-15.981c10.913-8.717,24.448-20.982,39.143-35.468
	c28.393-27.99,55.515-58.628,65.956-74.507C293.877,143.372,303.774,124.629,302.351,98.012z`},null,-1),Y=[X];function Z(t,s){return c(),i("svg",K,Y)}const ee=b(J,[["render",Z]]),te={class:"card"},se={class:"card__image"},ae=["src","alt"],ne={class:"card__footer"},oe={class:"card__title"},ce={key:0,class:"card__types"},ie=S({__name:"PokemonCard",props:{pokemon:null},emits:["favoriteHasClicked","unfavoriteHasClicked"],setup(t,{emit:s}){const{pokemon:r}=t,n=async e=>{e.preventDefault(),s("favoriteHasClicked",r.id)},l=async e=>{e.preventDefault(),s("unfavoriteHasClicked",r.id)};return(e,x)=>{const f=I,_=ee;return c(),i("div",te,[a("div",se,[a("img",{src:t.pokemon.image,alt:t.pokemon.name},null,8,ae)]),a("div",ne,[a("div",null,[a("h2",oe,y(t.pokemon.name),1),t.pokemon.types?(c(),i("span",ce,y(t.pokemon.types.join(", ")),1)):m("",!0)]),t.pokemon.isFavorite?m("",!0):(c(),w(f,{key:0,onClick:n})),t.pokemon.isFavorite?(c(),w(_,{key:1,onClick:l})):m("",!0)])])}}});const k="https://q-exercise-api.o64ixruq9hj.us-south.codeengine.appdomain.cloud/api/rest",re=async({limit:t,offset:s,search:r,isFavorite:n,type:l})=>{const e=new URL(`${k}/pokemon`);return t&&e.searchParams.append("limit",String(t)),s&&e.searchParams.append("offset",String(s)),r&&e.searchParams.append("search",r),l&&e.searchParams.append("type",l),n&&e.searchParams.append("isFavorite",String(n)),await $fetch(e.href)},le=async()=>await $fetch(`${k}/pokemon-types`),_e=async t=>await $fetch(`${k}/pokemon/${t}/favorite`,{method:"POST"}),ue=async t=>await $fetch(`${k}/pokemon/${t}/unfavorite`,{method:"POST"}),de={class:"filters__favorites"},pe={class:"type-favorites"},ve={class:"select"},me=a("option",{value:""},"Type",-1),fe=["value"],ke={key:0,class:"list"},xe=S({__name:"index",async setup(t){let s,r;const n=C("pokemonsCache",()=>[]),l=C("$pqtWcjQkdb"),e=U({limit:20,offset:0,search:"",isFavorite:!1,type:""}),{pending:x,data:f,refresh:_}=([s,r]=g(async()=>H("pokemon-list",async()=>{var u;const o=await re({...e.value,search:(u=e.value.search)==null?void 0:u.toLowerCase()});return l.value=o.count,n.value=[...n.value,...o.items],n.value})),s=await s,r(),s),{data:B}=([s,r]=g(async()=>H("pokemons-types",async()=>await le())),s=await s,r(),s),L=()=>{n.value=[],e.value.offset=0,e.value.isFavorite=!0,_()},T=()=>{n.value=[],e.value.offset=0,e.value.isFavorite=!1,_()},z=o=>{n.value=[],e.value.offset=0,e.value.search=o.target.value,_()},A=o=>{n.value=[],e.value.offset=0,e.value.type=o.target.value,_()},M=()=>{e.value.offset+=e.value.limit,_()},N=async o=>{await _e(o);const u=n.value.find(v=>v.id===o);u.isFavorite=!0},j=async o=>{await ue(o);const u=n.value.find(v=>v.id===o);u.isFavorite=!1};return(o,u)=>{const v=ie,q=O;return c(),i(h,null,[a("div",null,[a("div",de,[a("button",{class:$(["filter__all",{active:!d(e).isFavorite}]),onClick:T}," All ",2),a("button",{class:$(["filter__favorites",{active:d(e).isFavorite}]),onClick:L}," Favorites ",2)])]),a("div",pe,[a("input",{class:"filter__search",placeholder:"Search",type:"search",id:"name",name:"name",onInput:z},null,32),a("div",ve,[a("select",{name:"types",id:"types",class:"filter__select",onChange:A},[me,(c(!0),i(h,null,P(d(B),(p,D)=>(c(),i("option",{value:p,key:D},y(p),9,fe))),128))],32)])]),d(f)?(c(),i("ul",ke,[(c(!0),i(h,null,P(d(f),p=>(c(),i("li",{key:p.id},[F(q,{to:`/pokemon/${p.id}`},{default:V(()=>[F(v,{pokemon:p,onFavoriteHasClicked:N,onUnfavoriteHasClicked:j},null,8,["pokemon"])]),_:2},1032,["to"])]))),128))])):m("",!0),d(n).length<=d(l)-1?(c(),i("button",{key:1,class:"button",onClick:M}," More pokemons ")):m("",!0)],64)}}});export{xe as default};
